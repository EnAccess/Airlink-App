<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AirLink Server</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="641fbcdb-fd28-40be-8351-11db708aba26" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/gradients_3.png" style="object-position:center 60%"/><div class="page-header-icon page-header-icon-with-cover"><img class="icon" src="https://www.notion.so/icons/server_blue.svg"/></div><h1 class="page-title">AirLink Server</h1></header><div class="page-body"><div id="89c7a52a-4f49-4511-9332-f9d444f05f9d" class="column-list"><div id="4f2a8b77-d341-4828-970c-a75e83cd5e58" style="width:43.75%" class="column"><nav id="e0120357-b96b-4a30-a393-de45eb7f9965" class="block-color-brown_background table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#0b98bbb5-32f2-4b8b-a9df-f9dd5460597b">Demo Tenant</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#c2ac3c56-c3a7-4d66-baa3-277178939654">AirLink IoT Server Architecture</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3d997f88-7721-479b-87f5-ba7927176cad">Test entities</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#5975a1f7-5958-4a1f-90e1-ca1e4a7d711f">Tenant Configuration</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7022243f-d89f-43cd-86cc-4c1353c5963f">How to get started with your AirLink Server tenant</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5656ba10-a45f-41a5-ac05-5a5a4a2d4931">User Roles</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#395a1789-2e98-407a-a7c6-42fee61df291">Device Provisioning Flow in AirLink Server</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7a9c5ffd-4d7c-4806-b5fb-8c02c3176bfe">Attributes and Time Series Data</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5ba25bae-51a7-4056-b4eb-3c2ed4a1cce8">Authentication and Access types</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e586a228-807a-4de1-8bcd-9a05aa3f2c53">Data Transport</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ce2c159d-dedc-4e4c-8fc3-c72acb339d9c">KeyCode generation</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#14f4e0ec-7861-4eb7-9c2d-4b05e56df8aa">KeyCode Generator Test Results</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a7ca0875-7f1d-4fdb-ac67-1d77818a43b3">Lost asset location tracking</a></div></nav></div><div id="dccaaeb5-2524-4006-8b05-d38d98dd7c59" style="width:56.25%" class="column"><h3 id="0b98bbb5-32f2-4b8b-a9df-f9dd5460597b" class="">Demo Tenant</h3><p id="fa79d48c-5fd6-4687-8cc1-b9d0d2fdc5f9" class="">We have created a fully functional demo tenant to enable quick testing of AirLink in conjunction with the gateway and device apps. The demo tenant also can plot information reported from the Nordic BLE kit, as shown below:</p><figure id="ada230ee-65b5-4134-938d-df9b051760ba" class="image"><a href="AirLink%20Server/demo_tenant.jpg"><img style="width:1280px" src="AirLink%20Server/demo_tenant.jpg"/></a></figure></div></div><h2 id="c2ac3c56-c3a7-4d66-baa3-277178939654" class="block-color-orange_background">AirLink IoT Server Architecture</h2><p id="f3cdba89-cd96-427e-a4ee-ca05e38eaec2" class="">AirLink builds a structure on top of a standard <a href="http://Thingsboard.io">Thingsboard.io</a> professional edition server. The only, minimal customization is the addition of a rule node to generate PAYG tokens, which is not a default part of Thingsboard. A Thingsboard PE server is a ‘multi-tenant’ server, which means several separated businesses can run their IoT devices from a single server without visibility into the other tenants data. This setup makes it a perfect candidate for a centrally hosted server that can onboard new participants in the AirLink community. <em><strong>Please familiarize yourself with </strong></em><em><strong><a href="http://thingsboard.io/">http://thingsboard.io/</a></strong></em><em><strong> documentation before reading the rest of this page!</strong></em></p><figure id="fdf5dfcc-c506-431c-838c-41eb1c407933" class="link-to-page"><a href="AirLink%20Server/How%20we%20chose%20Thingsboard%20io%20for%20AirLink%20Server%20fdf5dfccc506431c838c41eb1c407933.html"><span class="icon">🔷</span>How we chose Thingsboard.io for AirLink Server</a></figure><p id="793c248c-67f7-4954-ac8e-dc9eb509488d" class="">
</p><p id="fec9f136-06ba-4b1d-9318-dd9d0ab34151" class="">In the figure, the “AirLink Tenant” is the main location of the IoT setup of a particular tenant, which can be very different from the next tenant. In fact, we setup a second “Lost &amp; Found Tenant”, also referred in this documentation as “Neighborhood Watch”, which is intended to be a common repository for tenant gateways who find AirLink devices that don’t belong to them but want to help locate them.</p><p id="c344c2b7-407d-4e5a-bf36-a7c9ebe691a8" class="">This documentation serves as the reference to setup your own tenant in a way that is AirLink compliant. The bulk of the setup is very simple, and the only relatively complex configuration which is the “Rule Chain”, can be imported from a JSON file available in the <a href="https://github.com/EnAccess/AirLink-Server">AirLink Server repository</a>.</p><figure id="c16714f9-11d6-49de-9c9d-d6d8528a4e29" class="image"><a href="AirLink%20Server/IoT_Communications_and_Components_spec_-_Thingsboard.io_Architecture.png"><img style="width:2238px" src="AirLink%20Server/IoT_Communications_and_Components_spec_-_Thingsboard.io_Architecture.png"/></a><figcaption>AirLink Server Tenant Setup</figcaption></figure><div id="1e02ad21-427d-4580-8173-baf543d9fb82" class="collection-content"><h4 class="collection-title">Concepts by Use Case</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Business Need</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>Business Concepts</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>Thingsboard Concepts</th></tr></thead><tbody><tr id="66b81060-a908-455f-bb17-619a5f846bdc"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Devices%20provision%20themselves%2066b81060a908455fbb17619a5f846bdc.html">Devices provision themselves</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-purple">ProvisionDevice</span><span class="selected-value select-value-color-gray">Technician</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-blue">API Token</span><span class="selected-value select-value-color-red">Device AuthToken</span><span class="selected-value select-value-color-yellow">Gateway</span><span class="selected-value select-value-color-pink">Integration</span><span class="selected-value select-value-color-brown">Provisioning</span><span class="selected-value select-value-color-gray">Rule-chain Script</span></td></tr><tr id="c3012da3-a010-4f53-b883-2c21fa16a52c"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/AirLink%20uses%20nexus%20channel%20resource%20models%20ie%20stan%20c3012da3a0104f53b8832c21fa16a52c.html">AirLink uses nexus channel resource models ie standard device types</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-blue">AirLink</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-red">Attributes</span><span class="selected-value select-value-color-pink">Device Profiles</span></td></tr><tr id="3f2fea6b-3170-4024-882c-f9a5d171e742"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Simusolar%20uses%20Aeris%20globalSIM%20in%20PAYG%20gateways%203f2fea6b31704024882cf9a5d171e742.html">Simusolar uses Aeris globalSIM in PAYG** gateways</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-pink">Aeris VPN</span><span class="selected-value select-value-color-default">First PAYG Server</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-red">Device AuthToken</span><span class="selected-value select-value-color-yellow">Gateway</span><span class="selected-value select-value-color-pink">Integration</span></td></tr><tr id="7f9bdd56-7571-49af-a4f1-18321faee0e1"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Phone%20or%20solar%20panel%20controls%20device%207f9bdd56757149afa4f118321faee0e1.html">Phone or solar panel controls device</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-blue">AirLink</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-red">Device AuthToken</span><span class="selected-value select-value-color-default">Device Group</span></td></tr><tr id="4f8b0c6f-a180-4ae2-ad3a-30f3584702ed"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Device%20belongs%20to%20customer%204f8b0c6fa1804ae2ad3a30f3584702ed.html">Device belongs to customer</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-green">PAYG Box ID</span><span class="selected-value select-value-color-brown">PAYG Customer</span><span class="selected-value select-value-color-pink">Sales Order</span><span class="selected-value select-value-color-orange">System ID</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-blue">API Token</span><span class="selected-value select-value-color-brown">Customer</span><span class="selected-value select-value-color-purple">Device</span><span class="selected-value select-value-color-pink">Integration</span></td></tr><tr id="d87fa722-3235-4f28-a90a-eec6fa8e8371"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Orders%20make%20Customers%20d87fa72232354f28a90aeec6fa8e8371.html">Orders make Customers</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-brown">PAYG Customer</span><span class="selected-value select-value-color-pink">Sales Order</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-orange">Asset</span><span class="selected-value select-value-color-brown">Customer</span></td></tr><tr id="6044cee8-4d40-4ef0-a393-3ca8fab60303"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/CBOR%20transfer%20over%20HTTP%20MQTT%206044cee84d404ef0a3933ca8fab60303.html">CBOR transfer over HTTP/MQTT</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-blue">AirLink</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-yellow">Data Converter</span><span class="selected-value select-value-color-pink">Integration</span></td></tr><tr id="d337d92a-51e2-4165-8ab1-da5c8b1457d8"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Loan%20platform%20updates%20credits%20d337d92a51e241658ab1da5c8b1457d8.html">Loan platform updates credits</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-gray">Financing</span><span class="selected-value select-value-color-blue">PAYG Credit</span><span class="selected-value select-value-color-purple">Webi</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-blue">API Token</span><span class="selected-value select-value-color-pink">Integration</span></td></tr><tr id="51d48f9c-491d-4eb1-b18c-baefa5bf510f"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Device%20heeds%20PAYG%20credits%2051d48f9c491d4eb1b18cbaefa5bf510f.html">Device heeds PAYG credits</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-gray">Financing</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-red">Device AuthToken</span><span class="selected-value select-value-color-pink">Integration</span></td></tr><tr id="baad0df8-7fe5-4216-8bcf-5ebd8a6668b4"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/AirLink%20uses%20Nexus%20Keycode%20or%20Solaris%20OpenPAYGO%20To%20baad0df87fe542168bcf5ebd8a6668b4.html">AirLink uses Nexus Keycode or Solaris OpenPAYGO Token</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-blue">AirLink</span><span class="selected-value select-value-color-red">Token Automation</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-red">Attributes</span><span class="selected-value select-value-color-gray">Rule-chain Script</span></td></tr><tr id="0f4a8cfa-1638-41a7-b0a3-994c8d861c47"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Device%20data%20saved%200f4a8cfa163841a7b0a3994c8d861c47.html">Device data saved</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-red">Callhome Data</span><span class="selected-value select-value-color-green">Graphs and Maps</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-yellow">Data Converter</span><span class="selected-value select-value-color-purple">Device</span><span class="selected-value select-value-color-red">Device AuthToken</span><span class="selected-value select-value-color-gray">Rule-chain Script</span></td></tr><tr id="8b653e6e-ebf6-4652-9769-f252c7c097a8"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Partners%20can%20see%20referred%20customer%20data%208b653e6eebf646529769f252c7c097a8.html">Partners can see referred customer data</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-green">Graphs and Maps</span><span class="selected-value select-value-color-blue">PAYG Credit</span><span class="selected-value select-value-color-brown">PAYG Customer</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-orange">Customer Group</span><span class="selected-value select-value-color-green">Data Chart</span><span class="selected-value select-value-color-orange">Entity View Group</span></td></tr><tr id="ba872e9b-2e5b-4ae7-94e2-9ca8c342d176"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Technicians%20update%20devices%20ba872e9b2e5b4ae794e29ca8c342d176.html">Technicians update devices</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-purple">DFU</span><span class="selected-value select-value-color-blue">Debug Data</span><span class="selected-value select-value-color-purple">ProvisionDevice</span><span class="selected-value select-value-color-default">Service Swap</span><span class="selected-value select-value-color-gray">Technician</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-orange">Asset</span><span class="selected-value select-value-color-gray">Asset Group</span><span class="selected-value select-value-color-gray">DFU</span><span class="selected-value select-value-color-yellow">Data Converter</span><span class="selected-value select-value-color-purple">Device</span><span class="selected-value select-value-color-red">Device AuthToken</span><span class="selected-value select-value-color-yellow">Gateway</span><span class="selected-value select-value-color-pink">Integration</span><span class="selected-value select-value-color-pink">User Group</span></td></tr><tr id="0b6402e0-dc11-4363-abab-f162e27f883c"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Simusolar%20operates%20in%20several%20countries%20with%20inter%200b6402e0dc114363ababf162e27f883c.html">Simusolar operates in several countries with inter-country asset movement</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-red">Centralized IT</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-orange">Asset</span><span class="selected-value select-value-color-gray">Asset Group</span><span class="selected-value select-value-color-pink">User Group</span></td></tr><tr id="13bc9d05-709f-48e5-adc0-897d3b0b527e"><td class="cell-title"><a href="AirLink%20Server/Concepts%20by%20Use%20Case%201e02ad21427d45808173baf543d9fb82/Simusolar%20franchises%20payg%20functionality%2013bc9d05709f48e5adc0897d3b0b527e.html">Simusolar franchises payg functionality</a></td><td class="cell-Nz&lt;d"><span class="selected-value select-value-color-blue">Debug Data</span><span class="selected-value select-value-color-brown">Distributor</span><span class="selected-value select-value-color-green">Graphs and Maps</span><span class="selected-value select-value-color-blue">PAYG Credit</span><span class="selected-value select-value-color-red">Token Automation</span></td><td class="cell-YPI}"><span class="selected-value select-value-color-orange">Customer Group</span><span class="selected-value select-value-color-gray">Customer Hierarchy</span><span class="selected-value select-value-color-default">Multi-tenancy</span></td></tr></tbody></table></div><h3 id="3d997f88-7721-479b-87f5-ba7927176cad" class="">Test entities</h3><div id="dcdc4bf8-edd3-4c95-8a40-612d7099c76b" class="column-list"><div id="bd537387-11ee-4fa8-81bd-37142caa8689" style="width:31.25%" class="column"><p id="4743fd82-efc3-46da-a283-d290acc6962c" class="">We encourage creating test entities to learn about Thingsboard, that way production entities can be easily kept separate. Every entity can be grouped, so creating a test group for each type of entity is an easy way to do testing. Entities can be added to a test group by selecting one or more entities from the &#x27;All&#x27; catch-all group, and adding to a specific group.</p></div><div id="21c346ca-795a-40f6-b245-7c7de93fdc59" style="width:68.75%" class="column"><figure id="74f6e8b0-a641-44ca-9649-e9723138875f" class="image"><a href="AirLink%20Server/Screen_Shot_2021-11-14_at_3.42.53_PM.png"><img style="width:240px" src="AirLink%20Server/Screen_Shot_2021-11-14_at_3.42.53_PM.png"/></a></figure><figure id="553ed13c-cc31-48c3-95dd-f3a443997252" class="image"><a href="AirLink%20Server/Screen_Shot_2021-11-14_at_3.42.44_PM.png"><img style="width:240px" src="AirLink%20Server/Screen_Shot_2021-11-14_at_3.42.44_PM.png"/></a></figure><figure id="8c167839-4b29-49c9-90e8-69d3b1ef1c4e" class="image"><a href="AirLink%20Server/Screen_Shot_2021-11-14_at_3.42.30_PM.png"><img style="width:240px" src="AirLink%20Server/Screen_Shot_2021-11-14_at_3.42.30_PM.png"/></a></figure></div></div><p id="a9d5eb25-4e54-484e-bef7-8a2885895ecf" class="">
</p><h2 id="5975a1f7-5958-4a1f-90e1-ca1e4a7d711f" class="block-color-brown_background">Tenant Configuration</h2><div><h3 id="7022243f-d89f-43cd-86cc-4c1353c5963f" class="">How to get started with your AirLink Server tenant</h3><p id="e2a91b77-383b-42cd-a1f8-606ba5ed4e80" class="">Here is a step by step setup to your own tenancy in the AirLink server. Alternatively, if you end up installing your own <a href="http://Thingsboard.io">Thingsboard.io</a> server, this guide can also help you right past the end of the installation steps detailed on Thingsboard.io.</p><ol type="1" id="465b93db-e71d-41e0-a273-06dedd383248" class="numbered-list" start="1"><li>Assumption: You have a “Tenant Administrator” email login provided by EnAccess for the first AirLink server, or one that you made for your own server</li></ol><ol type="1" id="f7d1b632-594b-48e7-ad37-510a9a98f483" class="numbered-list" start="2"><li>Setup Device Profiles<figure id="96476437-ce39-4bad-aa91-e20b2aadf73d" class="image"><a href="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.20.24_PM.png"><img style="width:2028px" src="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.20.24_PM.png"/></a></figure><ol type="1" id="a826985a-3e7c-4fe7-a5b0-a91e6035472e" class="numbered-list" start="1"><li>Setup a “Gateways” profile and enable the “Allow provisioning...” option. To do this, you need to tap the pencil button and then remember to save by pressing the tick-mark button.<figure id="947332f0-d7f8-4f35-a5f6-50bfbaac0662" class="image"><a href="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.20.13_PM.png"><img style="width:480px" src="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.20.13_PM.png"/></a></figure></li></ol><ol type="1" id="79ea58ac-1c6b-4575-a3bc-26297bd8d024" class="numbered-list" start="2"><li>Setup a “Devices” Profile, and enable the “Default” checkbox as in the figure above. Also enable the “Allow provisioning...” option as in the previous step</li></ol><ol type="1" id="2e59ad10-15f8-4276-90ff-a8642f989006" class="numbered-list" start="3"><li>Copy the Provisioning Keys and Secrets, you will need to input these in the AirLink app!</li></ol></li></ol><ol type="1" id="77a568a3-e787-4ddf-9574-a0558a1be6a5" class="numbered-list" start="3"><li>Import the rule chains: All data that flows to the thingsboard server goes to the root rule chain, and any other rule chain that the root chain hands off to. To process AirLink data, especially to enable PAYG token generation as well as the Neighborhood watch function, we customized this rule chain and saved it as a JSON file in the <a href="https://github.com/EnAccess/AirLink-Server">AirLink Server repository</a>. To use functionality beyond just the core AirLink functionality, we created another “Business Logic” rule chain which gets handed off all the data from the Root rule chain.<ol type="a" id="01b89a03-2968-4528-a0f8-cba03abbd839" class="numbered-list" start="1"><li>First import the “Business Logic”, “Unknown Device Piggyback” and “PAYG Software Providers” rule chains JSON file by going to Rule Chain → + → Import Rule Chain<figure id="4179f844-0aac-4154-ac6d-be081f324c39" class="image"><a href="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.15.41_PM.png"><img style="width:2568px" src="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.15.41_PM.png"/></a></figure></li></ol><ol type="a" id="7d45f8f6-eab9-428b-bd77-aa3e89099e78" class="numbered-list" start="2"><li>Next, Import the “Root Advertisements and Telemetry” Rule chain. Your rule chain setup should look like this with no errors now:<figure id="81426f03-6358-4b65-986b-eced37193086" class="image"><a href="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.27.48_PM.png"><img src="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.27.48_PM.png"/></a></figure><figure id="33f5f7fa-70e4-420d-af12-66dc3528f6d1" class="image"><a href="AirLink%20Server/Screenshot_2023-01-30_at_1.48.06_PM.png"><img style="width:960px" src="AirLink%20Server/Screenshot_2023-01-30_at_1.48.06_PM.png"/></a></figure></li></ol><ol type="a" id="aa6854b0-f523-475f-9cf8-2967f53f360f" class="numbered-list" start="3"><li>Mark this rule chain as “Root” using the ‘flag’ button<figure id="1012fc15-730b-41ee-9bdd-4c19e02ae56e" class="image"><a href="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.16.36_PM.png"><img style="width:288px" src="Quick-start%20guide/Screen_Shot_2022-01-26_at_9.16.36_PM.png"/></a></figure></li></ol></li></ol><ol type="1" id="7135fe0c-8782-4a37-919e-66607d21c3ca" class="numbered-list" start="4"><li>Setup Test Devices, Customers, Users, Assets etc as shown in test entities above to assign devices, test the “Relationships” property and so on to build a digital model of your IoT business model. As you can see, each screenshot above has our own Test entities for good measure!</li></ol><ol type="1" id="71ac44c5-7c34-460e-bc32-f17a1a289a46" class="numbered-list" start="5"><li>That’s it for the minimum required configuration! Next, configure your AirLink App to talk to your server, and your set to test with real devices!</li></ol></div><p id="5d21be24-ff92-42fb-97bf-45f09f8e3ca2" class="">The following sections show a few details of the other elements of the server, the latest documentation for which can be found on <a href="http://thingsboard.io">thingsboard.io</a>.</p><h3 id="5656ba10-a45f-41a5-ac05-5a5a4a2d4931" class="">User Roles</h3><p id="0e0ee94d-06a7-47db-8aa7-a93d820522a7" class="">Two main roles are defined, Tenant Admin (first assigned along with tenant) who has full privileges within the platform including controlling other users access, and Technician who has full device privileges including re-provisioning and assigning to customers. Customer administration is presumed to be done via API integration by the business applications server, hence there is no third role regarding customer administration. </p><figure id="87dbeff7-cd5b-49e9-adc4-a1194338b935" class="image"><a href="AirLink%20Server/Screen_Shot_2022-01-26_at_9.29.42_PM.png"><img style="width:2552px" src="AirLink%20Server/Screen_Shot_2022-01-26_at_9.29.42_PM.png"/></a></figure><p id="3fc5c012-47e6-4e93-bc0c-9670e2696892" class="">
</p><div><h3 id="395a1789-2e98-407a-a7c6-42fee61df291" class="">Device Provisioning Flow in AirLink Server</h3><table id="c57ed561-10ba-4965-9999-4538bfd29af0" class="simple-table"><thead class="simple-table-header"><tr id="80abe25c-d9b4-43ac-8ea8-5553bfc2afc4"><th id="wF\N" class="simple-table-header-color simple-table-header">Device State</th><th id="B=uI" class="simple-table-header-color simple-table-header" style="width:638px">Gateway Action</th></tr></thead><tbody><tr id="9cfceb1f-2802-4584-9224-c55d316ad43e"><td id="wF\N" class="">No Serial #</td><td id="B=uI" class="" style="width:638px">Program Serial # via BLE to Device</td></tr><tr id="5fdc8d32-eef0-47ed-9583-9e47818eae96"><td id="wF\N" class="">Has Serial #, but not Provisioned</td><td id="B=uI" class="" style="width:638px">Act as Application Server: using Tenant Admin or Customer User credentials (login + password)
1. Generate Server Auth Token (SAT) and Airlink ID (aid)
2. Provision Device to Devices Profile* in Server and get DeviceUUID
3. Generate PAYG Token Secret (PTS)
4. Write PTS to Server Side Attributes using DeviceUUID in Thingsboard server
5. Forget DeviceUUID

using BLE, 
1. write (SAT), (PTS) to device</td></tr><tr id="0cc26098-cad5-43c2-ab35-29d4f80a81fa"><td id="wF\N" class="">Has Serial #, SAT, PTS</td><td id="B=uI" class="" style="width:638px">Act as application server: 
Request PAYG Token generation using user credentials / token generation credentials

Act as regular gateway: 
1. Request PAYG Attributes for Device using SAT
2. Write PAYG Token to device using BLE</td></tr><tr id="08b45a80-bfc3-4e70-bdfb-fa60bec89b5c"><td id="wF\N" class="">Has Serial#, SAT, PTS and test token</td><td id="B=uI" class="" style="width:638px">Read device telemetry and post to server</td></tr></tbody></table></div><p id="a4bdb8f4-784d-4b3b-9ece-a58775e09de4" class="">*Device profiles can be considered as the equivalent of &#x27;class definitions&#x27; in object oriented programming, with each device then being an instance of a particular profile. We have two main device profiles, an edge device and a gateway. These could potentially be merged, however Thingsboard does make a differentiation between a gateway and non-gateway with a checkbox as well as requirements on data format, hence we define two profiles.</p><h3 id="7a9c5ffd-4d7c-4806-b5fb-8c02c3176bfe" class="">Attributes and Time Series Data</h3><p id="7a08054f-ebef-42bc-b9fe-e2a9d29ef451" class="">Data exchanged with the device or with the application server in the context of a device are termed attributes. </p><div id="78e82d3f-1dd5-4d9b-ae08-cefaa3f8b435" class="column-list"><div id="3f564ad7-4731-453c-a7bf-e348381a3642" style="width:56.25%" class="column"><p id="b35451b2-e629-41e5-addb-bc7e99d2c829" class="">In the AirLink server (based on Thingsboard), Attributes are Device properties that are only stored as current values, while Timeseries data are properties tracked over time. Attributes and Timeseries keys can be created during provisioning or are automatically created in the Airlink server when first posted, allowing for flexibility in growing resource models over time without requiring reconfiguration of the server. The core AirLink resource models are registered in the <a href="https://angaza.github.io/nexus-channel-models/resource_type_registry.html">Nexus Resource Models Registry</a>.</p><p id="69ef8746-f364-41e2-8eee-6432a4ec23f3" class="">The following are the major attribute types and their scopes in a basic AirLink setup.</p></div><div id="e0ab7958-b49b-46d5-88bc-4b542719ea2a" style="width:43.75000000000001%" class="column"><figure id="da9b11a4-2a78-4cb1-95bc-a3b43ac4238b"><a href="https://thingsboard.io/docs/user-guide/attributes/" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Working with IoT device attributes</div><div class="bookmark-description">On this page ThingsBoard provides the ability to assign custom attributes to your entities and manage these attributes. Those attributes are stored in the database and may be used for data visualization and data processing. Attributes are treated as key-value pairs.</div></div><div class="bookmark-href"><img src="https://thingsboard.io/images/favicon.png" class="icon bookmark-icon"/>https://thingsboard.io/docs/user-guide/attributes/</div></div><img src="https://thingsboard.io/images/thingsboard_logo.png" class="bookmark-image"/></a></figure></div></div><div id="48693d96-108d-49cf-89d0-302e73702f35" class="column-list"><div id="84ded987-db8e-4415-8d22-27c70cde6b13" style="width:56.25%" class="column"><p id="27528c0e-1640-41d1-8bdf-d04dea63dd93" class=""><strong>Server Side:</strong> Attributes only seen by the server and application server integrations</p><p id="df3be682-698a-4b40-b87f-5b370e75a5bf" class=""><strong>Shared by Server:</strong> Attributes written to by the server and application server integrations, and available to the Device to read only</p><p id="87a6263f-7a02-49e2-b3b2-96bb4dc62cab" class=""><strong>Device Side:</strong> Attributes written to by the device, and by application server integrations. Time series data also behaves this way.</p></div><div id="7e8cba80-1dd7-4d63-bdc1-b170e17f372c" style="width:43.74999999999999%" class="column"><figure id="7d2ba6f5-8441-41fc-aaed-1172da5e7f04" class="image"><a href="AirLink%20Server/Screen_Shot_2021-11-14_at_3.36.07_PM.png"><img style="width:336px" src="AirLink%20Server/Screen_Shot_2021-11-14_at_3.36.07_PM.png"/></a><figcaption>Screenshot from AirLink server showing Attributes and Telemetry. Telemetry is always client-scope or &#x27;device side&#x27;</figcaption></figure></div></div><div id="81cd9ab6-05c5-4348-a6c0-3bbef738dbd2" class="collection-content"><h4 class="collection-title">Attribute Scopes for AirLink resource properties</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Name</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM7.62402 10.6348C7.79492 10.915 8.20508 10.9287 8.37598 10.6348L10.666 6.73145C10.8574 6.41016 10.7002 6.04102 10.3652 6.04102H5.62793C5.29297 6.04102 5.14941 6.43066 5.32031 6.73145L7.62402 10.6348Z"></path></svg></span>Scope</th></tr></thead><tbody><tr id="c22121ef-2822-4db8-91e7-65cb24ba59d5"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/Rule%20chain%20alarm%20Thresholds%20c22121ef28224db891e765cb24ba59d5.html">Rule chain alarm Thresholds</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-red">Server Side</span></td></tr><tr id="30d49450-eb1a-44cc-bd1a-c620dcc63072"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/Device%20Administration%20Configuration%2030d49450eb1a44ccbd1ac620dcc63072.html">Device Administration Configuration</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-red">Server Side</span></td></tr><tr id="b0938319-7181-4a90-b318-c81b731c49f2"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/PAYG%20Token%20Secret,%20Message%20ID%20b093831971814a90b318c81b731c49f2.html">PAYG Token Secret, Message ID</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-red">Server Side</span></td></tr><tr id="ef142aca-b5b4-4b3a-9fcb-61522d5acaf5"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/PAYG%20Command%20or%20Token%20ef142acab5b44b3a9fcb61522d5acaf5.html">PAYG Command or Token</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-yellow">Shared by Server</span></td></tr><tr id="c74f19fa-1fe5-4ddd-b737-c804e3d103da"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/Device%20provisioning%20or%20claiming%20keys%20c74f19fa1fe54dddb737c804e3d103da.html">Device provisioning or claiming keys</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-yellow">Shared by Server</span></td></tr><tr id="c6f47efb-3ff5-4285-8cf7-6d07d5186883"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/Customer%20Provisioning%20Information%20c6f47efb3ff542858cf76d07d5186883.html">Customer Provisioning Information</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-yellow">Shared by Server</span></td></tr><tr id="34a6a602-8147-45ab-9a28-940d1d3af142"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/AirLink%20ID%2034a6a602814745ab9a28940d1d3af142.html">AirLink ID</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-yellow">Shared by Server</span></td></tr><tr id="5c5d4a52-7a5e-4fa1-8fc3-2c31fe1fba8c"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/Timeseries%20Data%205c5d4a527a5e4fa18fc32c31fe1fba8c.html">Timeseries Data</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-green">Device (Client) Side:</span></td></tr><tr id="11596ed3-dbde-4bf4-a6f9-621ddc6dcede"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/PAYG%20Status%2011596ed3dbde4bf4a6f9621ddc6dcede.html">PAYG Status</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-green">Device (Client) Side:</span></td></tr><tr id="988f3023-800e-4866-a1e1-261b6fa36f35"><td class="cell-title"><a href="AirLink%20Server/Attribute%20Scopes%20for%20AirLink%20resource%20properties%2081cd9ab605c54348a6c03bbef738dbd2/Config%20status%20e%20g%20Firmware%20version%20988f3023800e4866a1e1261b6fa36f35.html">Config status e.g. Firmware version</a></td><td class="cell-x=a^"><span class="selected-value select-value-color-green">Device (Client) Side:</span></td></tr></tbody></table></div><p id="8fa5477e-119a-4bc4-9dc9-6ff115114254" class="">CBOR data types are defined here:</p><p id="c1c609fa-919f-434c-9739-be7a884dcad9" class=""><a href="https://datatracker.ietf.org/doc/html/rfc7049#section-2.1">https://datatracker.ietf.org/doc/html/rfc7049#section-2.1</a></p><div id="8f353da8-b854-4540-b1c9-7a5f36b166b0" class="collection-content"><h4 class="collection-title">Server and Shared Data to support AirLink Devices</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>Nx Resource</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>rtr</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Resource Property</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>key</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesFormula"><path d="M5.04688 14.3604H11.2744C11.7324 14.3604 12.0537 14.0801 12.0537 13.6494C12.0537 13.2119 11.7324 12.9248 11.2744 12.9248H5.81934V12.8564L9.30566 8.82324C9.54492 8.57031 9.6748 8.29688 9.6748 8.0166C9.6748 7.73633 9.54492 7.45605 9.29883 7.20996L5.81934 3.2793V3.21094H11.2812C11.7393 3.21094 12.0537 2.92383 12.0537 2.48633C12.0537 2.05566 11.7393 1.77539 11.2812 1.77539H5.05371C4.34277 1.77539 3.95312 2.26758 3.95312 2.81445C3.95312 3.12207 4.07617 3.44336 4.33594 3.69629L8.15039 7.96875V8.05078L4.3291 12.4395C4.06934 12.6924 3.94629 13.0137 3.94629 13.3213C3.94629 13.8682 4.33594 14.3604 5.04688 14.3604Z"></path></svg></span>rtr_prop</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>Qualifiers</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>CBOR Type</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>Description</th></tr></thead><tbody><tr id="35227ec2-0e69-4686-bc5e-726f9bebdb01"><td class="cell-t|ym">AirLink Device Provisioning 1.0</td><td class="cell-vCLP">prd</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Server%20Auth%20Token%2035227ec20e694686bc5e726f9bebdb01.html">Server Auth Token</a></td><td class="cell-Ig|N">sat</td><td class="cell-_qbC">prd_sat</td><td class="cell-IIDy"><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-yellow">Scope: Shared</span><span class="selected-value select-value-color-brown">String</span></td><td class="cell-mZEj">3</td><td class="cell-T\Dx"><a href="http://thinsboard.io">Thinsboard.io</a> has a 20-char device authentication token unique to each device. During device provisioning, this token is written to the device, permanently attaching the device to the server. The token is never transmitted again.</td></tr><tr id="b8372b20-5dcd-46ec-a168-cbe185648c48"><td class="cell-t|ym">AirLink Device Provisioning 1.0</td><td class="cell-vCLP">prd</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Provisioning%20Status%20b8372b205dcd46eca168cbe185648c48.html">Provisioning Status</a></td><td class="cell-Ig|N">pst</td><td class="cell-_qbC">prd_pst</td><td class="cell-IIDy"><span class="selected-value select-value-color-green">Integer (uint8_t)</span><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-yellow">Scope: Shared</span></td><td class="cell-mZEj">0</td><td class="cell-T\Dx"><mark class="highlight-red">Reflected in Advt packet also. </mark>It can be unprovisioned, disabled, recall, stolen, Cash, Loan. The range is from 1-9. If not supported then 0</td></tr><tr id="0e789d8d-a48f-4055-b7c8-8bb763d2f06c"><td class="cell-t|ym">AirLink Device Provisioning 1.0</td><td class="cell-vCLP">prd</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/PayG%20Unit%200e789d8da48f4055b7c88bb763d2f06c.html">PayG Unit</a></td><td class="cell-Ig|N">pu</td><td class="cell-_qbC">prd_pu</td><td class="cell-IIDy"><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-yellow">Scope: Shared</span><span class="selected-value select-value-color-brown">String</span></td><td class="cell-mZEj">3</td><td class="cell-T\Dx">36^1  The unit of the PayG update, it can be minutes, hours, days, months and years. [m-minutes, h-hours, d- days, M-months, Y-years]</td></tr><tr id="cbbcf7cc-9486-491e-ac18-8e8d4f46de54"><td class="cell-t|ym">AirLink Device Provisioning 1.0</td><td class="cell-vCLP">prd</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/PayG%20Token%20starting%20code%20cbbcf7cc9486491eac188e8d4f46de54.html">PayG Token starting code</a></td><td class="cell-Ig|N">psc</td><td class="cell-_qbC">prd_psc</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Scope: Shared</span><span class="selected-value select-value-color-brown">String</span></td><td class="cell-mZEj">3</td><td class="cell-T\Dx">1-day token, <a href="https://github.com/EnAccess/OpenPAYGO-HW">https://github.com/EnAccess/OpenPAYGO-HW</a></td></tr><tr id="0b964895-0115-4a75-8273-ff020a0340fa"><td class="cell-t|ym">AirLink Device Provisioning 1.0</td><td class="cell-vCLP">prd</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/PayG%20Units%20accepted%200b96489501154a758273ff020a0340fa.html">PayG Units accepted</a></td><td class="cell-Ig|N">pul</td><td class="cell-_qbC">prd_pul</td><td class="cell-IIDy"><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-default">Scope: Device</span><span class="selected-value select-value-color-brown">String</span></td><td class="cell-mZEj">3</td><td class="cell-T\Dx">CSV list of acceptable Units e.g. &quot;l&quot; for liters, &quot;h,d&quot; for hours and days</td></tr><tr id="ffeee399-beb4-40d2-9a6b-5f60041533c4"><td class="cell-t|ym">AirLink Client Provisioning 1.0</td><td class="cell-vCLP">prc</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Provisioning%20Status%20ffeee399beb440d29a6b5f60041533c4.html">Provisioning Status</a></td><td class="cell-Ig|N">pst</td><td class="cell-_qbC">prc_pst</td><td class="cell-IIDy"><span class="selected-value select-value-color-green">Integer (uint8_t)</span><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-yellow">Scope: Shared</span></td><td class="cell-mZEj">0</td><td class="cell-T\Dx"><mark class="highlight-red">Reflected in Advt packet also. </mark>It can be unprovisioned, disabled, recall, stolen, Cash, Loan. The range is from 1-9. If not supported then 0</td></tr><tr id="17a1f308-a1bd-43e9-ba68-644e1d36dcc7"><td class="cell-t|ym">AirLink Client Provisioning 1.0</td><td class="cell-vCLP">prc</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Readable%20ID%20+%20Cbor%20header%202%20bytes%2017a1f308a1bd43e9ba68644e1d36dcc7.html">Readable ID + Cbor header 2 bytes</a></td><td class="cell-Ig|N">rid</td><td class="cell-_qbC">prc_rid</td><td class="cell-IIDy"><span class="selected-value select-value-color-green">Integer (uint32_t)</span><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-yellow">Scope: Shared</span></td><td class="cell-mZEj">26</td><td class="cell-T\Dx">2^(8*4) = 4,294,967,296 numeric device ids or payment reference or any number that device should display</td></tr><tr id="447de667-9790-44af-a5b1-0b19150adc65"><td class="cell-t|ym">AirLink Client Provisioning 1.0</td><td class="cell-vCLP">prc</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Customer&#x27;s%20Phone%20447de667979044afa5b10b19150adc65.html">Customer&#x27;s Phone</a></td><td class="cell-Ig|N">cp</td><td class="cell-_qbC">prc_cp</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Optional</span><span class="selected-value select-value-color-yellow">Scope: Shared</span><span class="selected-value select-value-color-brown">String</span></td><td class="cell-mZEj">3</td><td class="cell-T\Dx">Requested by customers for stolen device reporting (needs a workflow to collect this number explicitly from client in addition to regular lead number). Assign the mobile number of the customer to a device. With maximum of 16 character including + and country code number. This is for security purpose</td></tr><tr id="8e700637-a9ac-4ad8-ab40-50baccd8d740"><td class="cell-t|ym">AirLink Client Provisioning 1.0</td><td class="cell-vCLP">prc</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Customer%20Name%208e700637a9ac4ad8ab4050baccd8d740.html">Customer Name</a></td><td class="cell-Ig|N">cn</td><td class="cell-_qbC">prc_cn</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Optional</span><span class="selected-value select-value-color-yellow">Scope: Shared</span><span class="selected-value select-value-color-brown">String</span></td><td class="cell-mZEj">3</td><td class="cell-T\Dx">Requested by customers for lost device reporting. This writes the customer name to a device with the maximum of 16 characters with space and special characters inclusive.</td></tr><tr id="cde93e10-db0b-4bdb-9082-5e7f9cee0c78"><td class="cell-t|ym">AirLink Nexus Command 1.0</td><td class="cell-vCLP">nxc</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Nexus%20COSE%20command%20cde93e10db0b4bdb90825e7f9cee0c78.html">Nexus COSE command</a></td><td class="cell-Ig|N">cmd</td><td class="cell-_qbC">nxc_cmd</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Scope: Shared</span></td><td class="cell-mZEj">3</td><td class="cell-T\Dx">Upto 120 bytes for Nexus Channel Passthrough commands</td></tr><tr id="6e8ee941-ef48-40ae-b3cb-505a7bae6bd4"><td class="cell-t|ym">AirLink PAYG 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Current%20Server%20Time%206e8ee941ef4840aeb3cb505a7bae6bd4.html">Current Server Time</a></td><td class="cell-Ig|N">lt</td><td class="cell-_qbC">pyg_lt</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Optional</span><span class="selected-value select-value-color-default">Scope: Device</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">Linux epoch format, expires in Y2035. The current time when updating the device with PayG update. We do not recommend using this to calculate PAYG use, because it could be used to trick the device into more tokens. This is for non-PAYG purposes eg client experience</td></tr><tr id="5762bdc2-311b-4b7b-ae36-2427af8f67f5"><td class="cell-t|ym">AirLink PAYG 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Timestamp%20of%20last%20PAYG%20Update%20to%20device%205762bdc2311b4b7bae362427af8f67f5.html">Timestamp of last PAYG Update to device</a></td><td class="cell-Ig|N">lts</td><td class="cell-_qbC">pyg_lts</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Optional</span><span class="selected-value select-value-color-default">Scope: Device</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">Linux epoch format, expires in Y2035, readonly - Historical last PayG update Timestamp</td></tr><tr id="d6145c33-d5d8-466f-9cfb-7e13d0c836a4"><td class="cell-t|ym">AirLink PAYG 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Timestamp%20at%20which%20PayG%20remaining%20was%20calculated%20d6145c33d5d8466f9cfb7e13d0c836a4.html">Timestamp at which PayG remaining was calculated</a></td><td class="cell-Ig|N">ts</td><td class="cell-_qbC">pyg_ts</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Optional</span><span class="selected-value select-value-color-default">Scope: Device</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">Linux epoch format, expires in Y2035. The Last date and time when the PayG update was fetched from the Server to client [Mobile phone or other communication device]</td></tr><tr id="555b1a7b-3753-47b9-b84c-57559b23eafc"><td class="cell-t|ym">AirLink PAYG 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Last%20Added%20PayG%20Credit%20555b1a7b375347b9b84c57559b23eafc.html">Last Added PayG Credit</a></td><td class="cell-Ig|N">lcr</td><td class="cell-_qbC">pyg_lcr</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Optional</span><span class="selected-value select-value-color-default">Scope: Device</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">Historical last PayG credit update duration. Range is from 01-9999</td></tr><tr id="d214d4ed-6343-4ed8-be59-4f6edc120a44"><td class="cell-t|ym">AirLink PAYG 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/PayG%20Token%20d214d4ed63434ed8be594f6edc120a44.html">PayG Token</a></td><td class="cell-Ig|N">tkn</td><td class="cell-_qbC">pyg_tkn</td><td class="cell-IIDy"><span class="selected-value select-value-color-yellow">Scope: Shared</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">SipHash token. Accepted by device only if valid. No read token to ensure unsecured gateways cannot act maliciously. </td></tr><tr id="6b1abaa5-8630-47ec-8037-f25373370564"><td class="cell-t|ym">PAYG Credit 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Mode%206b1abaa5863047ec8037f25373370564.html">Mode</a></td><td class="cell-Ig|N">mo</td><td class="cell-_qbC">pyg_mo</td><td class="cell-IIDy"><span class="selected-value select-value-color-gray">Not Implemented</span><span class="selected-value select-value-color-yellow">Scope: Shared</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">mode of device i.e. leading/following etc

<mark class="highlight-red">For Write, a Nexus Channel Link must be established otherwise read-only, updated via token. AirLink 1.0 does not implement Nexus Channel, which was in development at the time of release of AirLink 1.0</mark></td></tr><tr id="4f885f93-8ca5-4442-8892-0737f352d078"><td class="cell-t|ym">PAYG Credit 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Device%20PayG%20Credit%20Remaining%204f885f938ca5444288920737f352d078.html">Device PayG Credit Remaining</a></td><td class="cell-Ig|N">re</td><td class="cell-_qbC">pyg_re</td><td class="cell-IIDy"><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-purple">Scope: Time Series</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">should be The value  remaining for the device to OFF. 

<mark class="highlight-red">For Write, a Nexus Channel Link must be established otherwise read-only, updated via token. AirLink 1.0 does not implement Nexus Channel, which was in development at the time of release of AirLink 1.0</mark></td></tr><tr id="489aacc5-c473-465e-b1b4-cc4ea4d343ca"><td class="cell-t|ym">PAYG Credit 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Payg%20Token%20Secret%20489aacc5c473465eb1b4cc4ea4d343ca.html">Payg Token Secret</a></td><td class="cell-Ig|N">pts</td><td class="cell-_qbC">pyg_pts</td><td class="cell-IIDy"><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-orange">Scope: Server</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">On first release, this is the Nexus Keycode secret</td></tr><tr id="38de87cb-f449-4a14-91fa-f64dacd53f40"><td class="cell-t|ym">PAYG Credit 1.0</td><td class="cell-vCLP">pyg</td><td class="cell-title"><a href="AirLink%20Server/Server%20and%20Shared%20Data%20to%20support%20AirLink%20Devices%208f353da8b8544540b1c97a5f36b166b0/Payg%20Token%20Message%20ID%2038de87cbf4494a1491faf64dacd53f40.html">Payg Token Message ID</a></td><td class="cell-Ig|N">msg</td><td class="cell-_qbC">pyg_msg</td><td class="cell-IIDy"><span class="selected-value select-value-color-red">Mandatory</span><span class="selected-value select-value-color-orange">Scope: Server</span></td><td class="cell-mZEj"></td><td class="cell-T\Dx">On first release, this is the Nexus Keycode message ID</td></tr></tbody></table></div><p id="ef7f29d4-99ae-45f4-b5ef-db201c7b7ceb" class="">Posting of device data to the server for off-edge devices is done via gateway by sharing their device access tokens with the gateway using the application server. For Smartphone gateways, this can be done via a separate channel to the application server. For &#x27;thing&#x27; gateways, this must be done via a &#x27;disappearing&#x27; shared server attribute for that gateway, so that tokens are not saved in the insecure data space for too long. The application server then would update the attribute to transfer tokens to the gateway, and then blank it out once the gateway receives the tokens or after a certain timeout. </p><h3 id="5ba25bae-51a7-4056-b4eb-3c2ed4a1cce8" class="">Authentication and Access types</h3><p id="65e18ed7-8b3c-4ee8-8188-6ef8dd772756" class="">AirLink server controls IoT interactions and can connect with the business applications server via REST API. The Business Applications server must authenticate itself as a User or Customer using JWT authentication, or have access keys to a custom integration as specified in the authentication flow. Note that only Custom Integration configurations are visible in the UI, the built-in telemetry, admin etc endpoints are only visible in the Swagger documentation but all events from each endpoint are posted to the root rule chain, enabling customized business logic for all types of data.</p><figure id="143c27b9-8f71-4d02-becd-3fd3f1fd91f1" class="image"><a href="AirLink%20Server/IoT_Communications_and_Components_spec_-_Thingsboard.io_Architecture-2.png"><img style="width:960px" src="AirLink%20Server/IoT_Communications_and_Components_spec_-_Thingsboard.io_Architecture-2.png"/></a><figcaption>AirLink Server Device Auth Flows</figcaption></figure><p id="0fa09421-556f-4aac-b7be-bda9b65d54e7" class="">Full API reference is available as live Swagger documentation here after you have a tenant login: </p><figure id="945cc8a6-2612-4ef4-ac9e-9963ec7a7131"><a href="https://airlink.enaccess.org/swagger-ui.html" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Swagger UI</div></div><div class="bookmark-href"><img src="https://airlink.enaccess.org/webjars/springfox-swagger-ui/images/favicon-16x16.png" class="icon bookmark-icon"/>https://airlink.enaccess.org/swagger-ui.html</div></div></a></figure><h3 id="e586a228-807a-4de1-8bcd-9a05aa3f2c53" class="">Data Transport</h3><p id="11e3f13f-849d-491d-a250-99c8f4ea9f09" class="">Device-initiated or gateway-initiated communications posting time-series data and accepting a PAYG update response are expected to form the bulk of IoT traffic in PAYG use cases. Considering the Auth flows available for posting data, AirLink recommends four types of transport:</p><ol type="1" id="b52d8038-5810-477a-9703-3051917c70c0" class="numbered-list" start="1"><li>Individual devices equipped with GSM send data directly <em><strong>using their device token</strong></em> e.g. water pump control boxes</li></ol><ol type="1" id="e3bd9820-896d-41a1-8373-1819145a587a" class="numbered-list" start="2"><li>Gateways bundled with a sale <em><strong>register as MQTT gateways</strong></em> in the AirLink server to be able to post data from multiple downstream devices while minimizing bandwidth use. This is relevant because such IoT gateways often use data-thrifty &#x27;Global-SIM&#x27; cards which can rack up high data costs e.g. solar panel with GSM chip bundled with 3 batteries that it charges</li></ol><ol type="1" id="fbe13468-eb46-4f52-919d-8e34ae8791d4" class="numbered-list" start="3"><li>Phone apps acting as gateways post data <em><strong>as the device</strong></em> and get PAYG updates from the server, <em><strong>using the individual device tokens</strong></em> downloaded during the sales and service flows. This needs to be enabled by the business applications server and is useful because several phone gateways may be used to operate the same device and a one-device multi-gateway scenario with offline access is not well served by MQTT. PAYG security is still ensured by the fact that the token is still only decode-able to the server and the device and not the intervening gateways. e.g. equipment owner could operate the device, several equipment technicians could operate the device etc. </li></ol><ol type="1" id="244c37c9-4d4c-41cd-9607-94fbfbf08b81" class="numbered-list" start="4"><li>Phone apps and gateways post advertisement data for <em><strong>unknown</strong></em> AirLink devices to facilitate lost-and-found using a <em><strong>special property within the gateway&#x27;s telemetry </strong></em> which is then processed by the root rule chain with the necessary validations to ensure that data gets send to the correct recipient and so that it is not used for posting non-advertising telemetry or attributes for the device.</li></ol><p id="6ac488cf-6f1f-4b52-a601-7068d718450a" class="">AirLink currently only supports HTTP transport, CoAP will be enabled in the future. CBOR formatting of data is not currently supported.</p><div><div id="a0612818-3d76-429d-aa47-957b6937dbda" class="collection-content"><h4 class="collection-title">MQTT vs HTTP/CoAP in an AirLink context</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Concept</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>MQTT</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>HTTP/CoAP ✅</th></tr></thead><tbody><tr id="700c933a-948b-4d20-82df-6f9827c61586"><td class="cell-title"><a href="https://www.notion.so/Application-Server-IoT-Server-model-for-value-added-services-700c933a948b4d2082df6f9827c61586">Application Server + IoT Server model for value-added services</a></td><td class="cell-yyv:">⚠️ Can only be used for IoT comms, not business app comms</td><td class="cell-}[Ae">Needed by phone app for comms to application server, but not by non-phone gateways</td></tr><tr id="3c746668-7ae3-4681-a1fa-c00d92175602"><td class="cell-title"><a href="https://www.notion.so/Bandwidth-3c7466687ae34681a1fac00d92175602">Bandwidth</a></td><td class="cell-yyv:">Better than HTTP for persistent connections - not expected in AirLink</td><td class="cell-}[Ae">✅ CoAP is better than MQTT, more so when connections are sporadic - as is expected in AirLink</td></tr><tr id="fc4bc4c9-2700-48a6-8d7c-94e3850dd2ec"><td class="cell-title"><a href="https://www.notion.so/IoT-Gateway-functionality-fc4bc4c9270048a68d7c94e3850dd2ec">IoT Gateway functionality</a></td><td class="cell-yyv:">✅ Thingsboard supports MQTT as gateway paired with customer devices, majority use case
✅ Single connection can report multiple devices&#x27; data
❌ If multiple gateways need to own devices, they would need to be transferred between devices e.g. Field service agent&#x27;s phone, customer&#x27;s phone, farm boys&#x27; phone etc by online transactions with server - may not be feasible in the field</td><td class="cell-}[Ae">⚠️ Credential of each device would need to be known to gateway (additional thingsboard workflow), and list of gateways that can control device wouldn&#x27;t be registered with Airlink server (more potential for spoofing), requiring credentials to be refreshed or other security measures
⚠️ Each device would need to be reported separately, increasing number of HTTP required connections
✅ Could support arbitrary number of gateways</td></tr></tbody></table></div></div><h3 id="ce2c159d-dedc-4e4c-8fc3-c72acb339d9c" class="">KeyCode generation</h3><figure id="1a1f4050-ee62-4a4e-b755-d5e61a4b8f83" class="image"><a href="AirLink%20Server/Token_Generation_in_Rule_Chain.png"><img style="width:2288px" src="AirLink%20Server/Token_Generation_in_Rule_Chain.png"/></a><figcaption>Nexus Keycode generation integrated into the Root Rule Chain</figcaption></figure><p id="f439899f-ab8f-486c-b89a-de656ad794da" class="">Nexus Keycode as well as OpenPAYGO Token use &#x27;SipHash&#x27; to generate the key, and have Python/Java libraries available. However Thingsboard only runs single-file JavaScript in it&#x27;s rule chains and custom Java in it&#x27;s rule nodes, hence we decided to create a Java rule node based on Nexus Keycode. External keycodes could also be used by swapping that rule node with an External REST component in the AirLink server that points to a client&#x27;s server running code generation, and response sent as token via AirLink to the device. </p><p id="a77fa59f-8def-4d7f-9c38-150a252a961a" class="">Since Keycode generation is not a telemetry-time operation but rather account-payment time operation, the number of requests will scale with the number of devices and payment frequency rather than the number or frequency of telemetry data. </p><p id="9c8fe136-c21b-4f30-9eeb-96f8d2f40853" class="">The provided KeyCode node</p><ol type="1" id="ef1642fc-fcc1-4486-9e1f-338b1302a89a" class="numbered-list" start="1"><li>Understands incoming business request as adding credit, setting credit or unlocking the device - POST REST requests to the rule-engine, authenticated using role-based access control (login) are used for the same.</li></ol><ol type="1" id="7b2c28a2-f424-4959-bd9b-2c016321e25d" class="numbered-list" start="2"><li>Uses a per-device secret stored in the AirLink server db and the SipHash algorithm to generate the actual keycode</li></ol><ol type="1" id="7d80b0fb-5a84-4c15-ad5b-bac826e38877" class="numbered-list" start="3"><li>Returns this keycode to the rule chain for saving in the database to serve future GET requests from devices, and potentially sends it to a business server if required for SMS communications or saving in the business application server database</li></ol><h3 id="14f4e0ec-7861-4eb7-9c2d-4b05e56df8aa" class="">KeyCode Generator Test Results</h3><p id="09d421be-a4a2-4df2-9b83-3100922117a4" class="">Here is a test sequence that can verify that the PAYG Token chain is working end to end from credit request to device function.</p><table id="eb4a2010-2afb-404e-b19d-25d3bade3415" class="simple-table"><thead class="simple-table-header"><tr id="57333fec-b097-41a5-ae6d-0e88e83725b1"><th id="AU&gt;;" class="simple-table-header-color simple-table-header" style="width:117px">KeyCode Node Function</th><th id="Dla@" class="simple-table-header-color simple-table-header" style="width:102px">msg_id, saved in server side attributes</th><th id="_t|~" class="simple-table-header-color simple-table-header" style="width:373px">Credit Request Packet from Postman POST mimicking loan management server - note the knowledge of ‘Device ID’, which is the UUID of the IoT device on the AirLink Server</th><th id="Ygd_" class="simple-table-header-color simple-table-header" style="width:156px">Input Key to KeyCode node, visible in node “Events” metadata with Debug enabled on AirLink Server</th><th id=":ncC" class="simple-table-header-color simple-table-header" style="width:271px">Output Message from KeyCode node sent to Device via Shared Attributes sync’d through the AirLink gateway App, visible in node “Events” metadata with Debug enabled on AirLink Server</th><th id="?Q~`" class="simple-table-header-color simple-table-header" style="width:246px">Decoded Output within AirLink Device implementing Nexus Keycode</th></tr></thead><tbody><tr id="082467b1-e2ca-464b-9423-b8f871f486ee"><th id="AU&gt;;" class="simple-table-header-color simple-table-header" style="width:117px">Added 6 Days</th><td id="Dla@" class="" style="width:102px">1</td><td id="_t|~" class="" style="width:373px">{
    “pay_g_tkn”:”6”
}</td><td id="Ygd_" class="" style="width:156px">“pay_g_tkn”:”6”,</td><td id=":ncC" class="" style="width:271px">*010 050 135 981 34#</td><td id="?Q~`" class="" style="width:246px">- Received tkn *01005013598134#
- PayG update received
- Keycode is valid.
- Credit remaining: 86400 seconds
- PayG update received</td></tr><tr id="c30a8b6d-d87c-4765-bed3-b11aacb123d3"><th id="AU&gt;;" class="simple-table-header-color simple-table-header" style="width:117px">Set Device to exactly 10 Days</th><td id="Dla@" class="" style="width:102px">2</td><td id="_t|~" class="" style="width:373px">{
    “set_tkn”:”11”
}</td><td id="Ygd_" class="" style="width:156px">“set_tkn”:”11”</td><td id=":ncC" class="" style="width:271px">*123 026 694 078 81#</td><td id="?Q~`" class="" style="width:246px">- Received tkn *12302669407881#
- PayG update received
- Keycode is valid.
- Credit remaining: 950100 seconds
- PayG update received</td></tr><tr id="9516221c-2a8f-4347-9c25-a4431082abe3"><th id="AU&gt;;" class="simple-table-header-color simple-table-header" style="width:117px">Unlock the Device</th><td id="Dla@" class="" style="width:102px">3</td><td id="_t|~" class="" style="width:373px">{
    “unlock_tkn”:”1”
}</td><td id="Ygd_" class="" style="width:156px"> “unlock_tkn”:”1”</td><td id=":ncC" class="" style="width:271px">*336 153 083 439 44#</td><td id="?Q~`" class="" style="width:246px">- Received tkn *33615308343944#
- PayG update received
- Keycode is valid.
- The device is unlocked
- PayG update received</td></tr></tbody></table><h3 id="a7ca0875-7f1d-4fdb-ac67-1d77818a43b3" class="">Lost asset location tracking</h3><p id="27b16218-b40d-4038-acef-24b7d0b75573" class="">A significant benefit of interoperability is the ability across vendors to track lost and stolen items. Given the distributed and rural nature of PAYG distribution, this becomes particularly relevant if all wireless-enabled devices can report their current location to any AirLink gateway whether paired with the device or not. The gateway then needs to be able to post this data to Thingsboard without knowing the device&#x27;s security token. To facilitate this process, the gateway posts device data one at a time as it&#x27;s own timeseries property which is processed by the Rule chain modification shown below. We then host a &#x27;Lost and Found Tenant&#x27; in the server as shown in the architecture diagram, where un-secured device locations can be stored by gateways registered to other tenants. The process then is that if a gateway chances upon a device it doesn&#x27;t have access to, it reports the advertising packet along with it&#x27;s own location to the &#x27;neighborhood watch&#x27; tenant, which then passes on the information to the tenant that owns the device using the device&#x27;s manufacturer code, and automated rule-chain code passes this unregistered device onto the lost and found tenant where it can be available for access by the tenant who may have lost the device. If the tenant owning the device is the same as that of the gateway, then MQTT can also be leveraged for posting advertisement data without any change required to the server. However for devices belonging to other tenants, since a gateway cannot claim them, this flow of posting via the /timeseries/ endpoint for the gateway itself as a piggyback device is valid. Unfortunately <a href="http://thingsboard.io">thingsboard.io</a> does not provide an easy method to post several devices from the gateway within the same transmission, hence the gateway will see one transmission per reported device. This should be considered in the data limits of each device, and alternate flows employed if the data flow is a bottleneck. Data-rich gateways such as Smartphones should afford virtually unlimited device reporting per day.</p><figure id="cb04f615-7615-4aa4-a94a-ad956242cacd" class="image"><a href="AirLink%20Server/Screen_Shot_2021-11-14_at_2.51.22_PM.png"><img style="width:864px" src="AirLink%20Server/Screen_Shot_2021-11-14_at_2.51.22_PM.png"/></a><figcaption>Gateway Telemetry with a Piggyback Device</figcaption></figure><p id="db8a6902-3526-4817-a826-5567bb955f51" class="">
</p></div></article></body></html>