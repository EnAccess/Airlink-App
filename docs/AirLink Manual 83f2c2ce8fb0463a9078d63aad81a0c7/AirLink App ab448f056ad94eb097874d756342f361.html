<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AirLink App</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="ab448f05-6ad9-4eb0-9787-4d756342f361" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/gradients_11.jpg" style="object-position:center 40%"/><div class="page-header-icon page-header-icon-with-cover"><span class="icon">üì±</span></div><h1 class="page-title">AirLink App</h1></header><div class="page-body"><div id="d09886c1-d10b-46d8-b4bb-e19a0cfdd9b9" class="column-list"><div id="f39511d1-333e-4648-a152-b2f9750ff50f" style="width:25%" class="column"><nav id="c2275248-b8f1-4c14-ac2f-7357385cb6a0" class="block-color-brown_background table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#b626e185-5fef-4a34-af35-5b1abe686a1f">Architecture</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#530a2b23-7840-4e6c-821e-8921f1946d69">Platform </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#c643aad8-b26a-4187-8d18-4911bda09da1">App Development Framework</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#57377a6e-8036-415b-9a3d-4811677baa8d">NuGet packages<mark class="highlight-teal_background"> </mark></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#88b932ea-cb05-49d9-9950-2ec901ac6fcd">Software                           </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b21c361a-5191-47e3-9f03-d1b563f15b6d">Dev hardware</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#1dd772ac-54f1-4fa4-9d6a-cbdf84c12bcc">Gateway Sync</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#edff178c-15dc-4ed4-a2bc-81f12ed5429d">App UX Interactions</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#fb8d3642-e32c-4c06-b43c-ad216abe5629">App Components</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ac6d27e9-fd46-4792-8595-444c9669bcb7">App Screenshots </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#da0a61e1-4602-4012-b492-a9d59addebe6">Configuring to connect to server</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b1258658-fe5e-4fcf-8877-88ddf8f2e0eb">Connecting to AirLink devices</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f631490e-cc73-4b13-9b3e-ca3b0e55bc90">Authorizing the gateway to the device with the Access Token</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#1bb700f8-d62b-4004-8ad9-595f1afeb455">Serializing and provisioning a new device and preparing it for accepting tokens</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#69738243-51b0-41f7-878c-80bfe17902bf">Entering Tokens</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#379d027d-52bb-47e6-9df1-1b136cc61919">Synchronizing data with the server over the lifetime of the device</a></div></nav></div><div id="8390b166-2940-49ac-b24c-9c74b1b10e18" style="width:75%" class="column"><p id="b2489844-e459-470c-9179-ebd8d0cb00b6" class="">The AirLink Mobile app is a communication app skeleton enabling gateway functionality i.e. end to end communication between AirLink Bluetooth¬Æ devices and an AirLink server. The app is built using the <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjt7azRxrzyAhUR0uAKHb6ND8UQFnoECAkQAw&amp;url=https%3A%2F%2Fdotnet.microsoft.com%2Fapps%2Fxamarin&amp;usg=AOvVaw1soanUlj4moAJwcyHipy87">Xamarin</a> framework and is intended to act as a base that takes care of device interactions, on which different customer experiences can be built by the businesses adopting AirLink. </p><figure id="a20b1164-e259-4ea7-a556-35f75778b30c" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/AirLink_Data_Flow.png"><img style="width:480px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/AirLink_Data_Flow.png"/></a></figure><p id="d447113c-356e-43f4-a0d6-cd79c348fad9" class="">Once the <span style="border-bottom:0.05em solid"><em>App Instance is authenticated to the tenant or customer by the application server transferring the provisioning codes, it can provision the phone as an AirLink gateway using the phone‚Äôs IMEI</em></span><span style="border-bottom:0.05em solid">. </span>This allows flexibility in lost phones by tying functionality and device ownership to an authenticated user rather than a particular phone. The app provides a UI for entering these codes until the application server is enabled.</p><p id="22c0e728-6ab5-47c3-a592-334ab5f4bbe3" class="">The app can be used for the following purposes:</p><ol type="1" id="fba905b5-de10-4681-944b-6f282691c547" class="numbered-list" start="1"><li>Scanning and connecting to AirLink devices automatically</li></ol><ol type="1" id="7c53a483-5c11-4b1e-826b-bf00c4a1d4fb" class="numbered-list" start="2"><li>Registering AirLink devices to the server securely</li></ol><ol type="1" id="f61e5c55-5f06-4e2f-9f57-0ae0ac0ce10c" class="numbered-list" start="3"><li>Updating Pay-as-you-go status of the device securely</li></ol><ol type="1" id="ddbb24ee-9db0-46c6-9818-ae34af854d89" class="numbered-list" start="4"><li>Posting data from the device to the server with authentication</li></ol><ol type="1" id="9b6025d0-6672-4571-964c-3cf40cf46c2b" class="numbered-list" start="5"><li>Finding AirLink devices even when the app is not running, and posting their locations to the server</li></ol></div></div><div id="5a53d824-def1-4b8f-9170-5a26b04c4bde" class="column-list"><div id="b93c2691-38cc-46a8-82e9-ce71853944c7" style="width:25%" class="column"><h2 id="b626e185-5fef-4a34-af35-5b1abe686a1f" class="block-color-purple_background">Architecture</h2></div><div id="64abfdcc-bf6c-46a8-8859-da29263e879d" style="width:75%" class="column"><figure id="eaa17878-027b-40b2-b917-ead4dde77441" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/App_Architecture.png"><img style="width:720px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/App_Architecture.png"/></a><figcaption>Mobile App Framework built on Xamarin</figcaption></figure></div></div><div id="eb823e6c-5ee1-4205-8ae6-773ce5dc4c17" class="column-list"><div id="72838aa3-f992-4d95-9f8f-d2f0cb0b85aa" style="width:25%" class="column"><h2 id="530a2b23-7840-4e6c-821e-8921f1946d69" class="block-color-blue_background">Platform </h2></div><div id="ffd0bd83-0684-4f50-93ff-5aa385c9cc17" style="width:75%" class="column"><h3 id="c643aad8-b26a-4187-8d18-4911bda09da1" class="block-color-blue_background">App Development Framework</h3><p id="c538bd43-10c6-4ff2-905b-0108de840e8d" class=""><strong>Xamarin multi-platform mobile app development framework</strong><div class="indented"><p id="4d3ebeeb-3032-4f41-a1a9-18279eabd042" class="">This is Microsoft&#x27;s multi-platform mobile app development framework. </p><p id="69d597df-316c-494e-be37-ad0829cf75e9" class="">Access of Bluetooth hardware requires platform specific code in Xamarin, and the AirLink App is implemented only for Android  at present but can be extended to iOS with minimal additional code. </p><p id="7a65d48a-4dd9-4e0b-8009-e10f3c94db87" class="">We chose Xamarin as the development environment due to it‚Äôs relative maturity compared with Flutter and larger community in case of development challenges, however we believe that an AirLink spec app can also be implemented in Flutter using the Xamarin app as a reference for functionality.</p><p id="fa0a0fcd-c0c4-4ed3-94b7-23f697fc12ec" class="">Xamarin Forms adds another layer of UI abstraction, at some cost of speed. We use Xamarin Forms for UI pages and all pages are represented in XAML.</p><figure id="f8ec64a4-e806-4952-89da-89af87b6d0ab"><div class="source"><a href="https://www.youtube.com/watch?v=JH8ekYJrFHs&amp;list=PLdo4fOcmZ0oU10SXt2W58pu2L0v2dOW-1">https://www.youtube.com/watch?v=JH8ekYJrFHs&amp;list=PLdo4fOcmZ0oU10SXt2W58pu2L0v2dOW-1</a></div></figure><p id="de520681-dd23-4b2d-bf24-02f1a4473c59" class="">
</p></div></p><p id="a8676ed1-e70b-411e-9e7e-0290390a20da" class=""><strong>Xamarin uses a MVVM Architecture</strong><div class="indented"><figure id="9128ae08-0727-4070-b2f6-619bbb585e3b" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/MVVMPattern.png"><img style="width:768px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/MVVMPattern.png"/></a><figcaption>By Ugaya40 - Own work, CC BY-SA 3.0, <a href="https://commons.wikimedia.org/w/index.php?curid=19056842">https://commons.wikimedia.org/w/index.php?curid=19056842</a></figcaption></figure></div></p><p id="7729cff3-7452-4ac5-9723-9047009b443b" class=""><strong>Material Design:</strong><div class="indented"><p id="9324d062-1693-4d76-9628-dbcb2ec15d51" class="">This app uses Material Design for it‚Äôs pages:</p><figure id="a9bf961a-d221-4e72-aa2a-95b964429abf"><a href="https://channel9.msdn.com/Shows/XamarinShow/XamarinForms-101-Using-Material-Design-in-Xamarin-Forms" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Xamarin.Forms 101: Using Material Design in Xamarin Forms</div><div class="bookmark-description">Let&#x27;s take a step back in a new mini-series that I like to call Xamarin.Forms 101. In each episode we will walk through a basic building block of Xamarin.Forms to help you build awesome cross-platform</div></div><div class="bookmark-href"><img src="https://channel9.msdn.com/favicon.ico" class="icon bookmark-icon"/>https://channel9.msdn.com/Shows/XamarinShow/XamarinForms-101-Using-Material-Design-in-Xamarin-Forms</div></div><img src="https://sec.ch9.ms/ch9/d7db/0d832b88-0689-4ef4-8e79-6cee2c1dd7db/UsingMaterialDesigninXamarinForms_960.jpg" class="bookmark-image"/></a></figure></div></p><p id="25638a22-6064-48e4-a320-5b93fbda7180" class=""><strong>Secure Storage:</strong><div class="indented"><p id="33aa939b-1cff-4c44-8a1c-ff92e239f530" class="">This app uses secure storage to save all authentication secrets</p><figure id="31ed046b-76c0-4d99-a8a8-f2bf2524c3c6"><a href="https://docs.microsoft.com/en-us/xamarin/essentials/secure-storage?tabs=android" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Xamarin.Essentials: Secure Storage - Xamarin</div><div class="bookmark-description">The SecureStorage class helps securely store simple key/value pairs. To start using this API, read the getting started guide for Xamarin.Essentials to ensure the library is properly installed and set up in your projects.</div></div><div class="bookmark-href"><img src="https://docs.microsoft.com/favicon.ico" class="icon bookmark-icon"/>https://docs.microsoft.com/en-us/xamarin/essentials/secure-storage?tabs=android</div></div><img src="https://docs.microsoft.com/en-us/media/logos/logo-ms-social.png" class="bookmark-image"/></a></figure></div></p><p id="0853db2f-f364-4913-80ad-884f8bc81626" class=""><strong>Preparing for Release:</strong><div class="indented"><figure id="7de04564-5be7-42f9-befd-34d09987783c"><a href="https://docs.microsoft.com/en-us/xamarin/android/deploy-test/release-prep/?tabs=windows#AOT_Compilation" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Preparing an Application for Release - Xamarin</div><div class="bookmark-description">After an application has been coded and tested, it is necessary to prepare a package for distribution. The first task in preparing this package is to build the application for release, which mainly entails setting some application attributes. Use the following steps to build the app for release: Each of these steps is described below in more detail.</div></div><div class="bookmark-href"><img src="https://docs.microsoft.com/favicon.ico" class="icon bookmark-icon"/>https://docs.microsoft.com/en-us/xamarin/android/deploy-test/release-prep/?tabs=windows#AOT_Compilation</div></div><img src="https://docs.microsoft.com/en-us/xamarin/android/deploy-test/release-prep/images/vs/02-versioning-sml.png" class="bookmark-image"/></a></figure></div></p><p id="5bc6e06d-41f2-4378-b963-b705e53e1920" class=""><strong>Next: </strong><div class="indented"><p id="379dd9ea-075e-4c77-813c-79fd68117f53" class="">Microsoft introduced new development framework [ .NET MAUI ] for increased code sharing across platforms, by leveraging .NET layers. This Xamarin-forms app could be converted to .NET MAUI in 2022 using the migration scripts that Microsoft has promised to provide.</p><p id="cd83ece6-6542-4b7e-b9dc-45cc0a63539a" class=""><a href="https://docs.microsoft.com/en-us/dotnet/maui/what-is-maui">https://docs.microsoft.com/en-us/dotnet/maui/what-is-maui</a></p><p id="3c234675-5b65-458b-832d-a5d69131c368" class="">
</p></div></p><div id="203534db-b9c1-4d33-aa1d-809bc5171a1e" class="column-list"><div id="bb094d16-a563-4622-b9b5-2d0f4e5fa472" style="width:50%" class="column"><h3 id="57377a6e-8036-415b-9a3d-4811677baa8d" class="block-color-blue_background">NuGet packages<mark class="highlight-teal_background"> </mark></h3><ul id="c2630118-b57b-4fe2-a4f8-45362a6b27b9" class="bulleted-list"><li style="list-style-type:disc">Acr.UserDialogs (7.2.0.562)</li></ul><ul id="f04f5d13-4ecd-4dea-b088-a981fd6386ad" class="bulleted-list"><li style="list-style-type:disc">ble.net(1.2.1)</li></ul><ul id="85f2d469-e4dc-479f-81e7-850cb595d565" class="bulleted-list"><li style="list-style-type:disc">NetStandard.Library (2.0.3)</li></ul><ul id="50e3eee3-0524-4cfd-90ae-42bc9c5c4e25" class="bulleted-list"><li style="list-style-type:disc">Newtonsoft.Json (13.0.1)</li></ul><ul id="fbffc851-40ae-4a62-89fe-44c1cdd030ad" class="bulleted-list"><li style="list-style-type:disc">PeterO.Cbor(4.5.0)</li></ul><ul id="fb9baac7-3fa5-434c-a670-4bec92b9ab38" class="bulleted-list"><li style="list-style-type:disc">Plugin.BLE (2.1.2)</li></ul><ul id="4e5090b1-bc0c-4871-a155-a3dcadae96b1" class="bulleted-list"><li style="list-style-type:disc">Rg.plugins.Popup (2.0.0.12)</li></ul><ul id="090494cb-728c-4c52-8580-3a51da8a12fa" class="bulleted-list"><li style="list-style-type:disc">sqlite-net (1.6.292)</li></ul><ul id="c7142237-48ba-42f0-bf81-df419d808ee0" class="bulleted-list"><li style="list-style-type:disc">sqlite-net-pcl (1.8.116)</li></ul><ul id="9a2642f4-6da9-4dfa-8501-9e89ce29ef5e" class="bulleted-list"><li style="list-style-type:disc">Xamarin.CommunityToolkit (1.3.2)</li></ul><ul id="297824bd-db03-4774-827d-30decf4b8b87" class="bulleted-list"><li style="list-style-type:disc">Xamarin.Essentials (1.7.0)</li></ul><ul id="8aafd3f9-b10c-49ea-a2ea-02c0d0916080" class="bulleted-list"><li style="list-style-type:disc">Xamarin.Forms (5.0.0.2291)</li></ul><ul id="e200c779-37d7-46aa-b6be-e5d34357e3b0" class="bulleted-list"><li style="list-style-type:disc">Xamarin.Forms.PancakeView (2.3.0.763-beta)</li></ul><ul id="43dcca7a-25b9-4fb8-9ada-c24826fa47f3" class="bulleted-list"><li style="list-style-type:disc">Xamarin.Forms.Visual.Material (5.0.0.2291)</li></ul><ul id="29f7c154-c46d-4b92-bd5b-2868b7a5eb51" class="bulleted-list"><li style="list-style-type:disc">ZXing.Net.Mobile (3.1.0-beta2)</li></ul></div><div id="264aa5cd-405b-42f7-96c7-dfc3e83813f8" style="width:50%" class="column"><h3 id="88b932ea-cb05-49d9-9950-2ec901ac6fcd" class="block-color-blue_background">Software                           </h3><p id="a956e309-2089-47d5-93a0-e07a9d7d3a01" class="">Visual Studio 2019, available for Mac/Windows</p><p id="45242ddf-666a-49d6-b490-7ee4664c3b30" class=""><a href="https://visualstudio.microsoft.com/vs/">https://visualstudio.microsoft.com/vs/</a></p><figure id="1c38135f-4b6b-4e3d-b7ed-0d2b3a30ccae" class="link-to-page"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Visual%20Studio%20setup%20and%20to%20Git%20library%20instruction%201c38135f4b6b4e3db7ed0d2b3a30ccae.html">Visual Studio setup and to Git library instructions (Mac)</a></figure><h3 id="b21c361a-5191-47e3-9f03-d1b563f15b6d" class="block-color-blue_background">Dev hardware</h3><p id="84693262-9981-4237-ab19-9ab219a3e285" class="">Computer recommendation: 8GB RAM, 128GB SSD, 2.0+ GHz processor</p><p id="49436097-d857-45dc-acf0-ec8dc19cd505" class="">Test AirLink Device: BLE Development Kit or any device with BLE.</p><p id="3db51131-5d03-4b40-a887-4fab97670f17" class="">Test Airlink Gateway Device: Android mobile phone. </p><figure id="53978ded-0c5a-4e08-a958-bd6eba1c6d21"><a href="https://docs.microsoft.com/en-us/xamarin/android/get-started/installation/set-up-device-for-development" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Set Up Device for Development - Xamarin</div><div class="bookmark-description">This article explains how to setup an Android device and connect it to a computer so that the device may be used to run and debug Xamarin.Android applications. After testing on an Android emulator, you will want to see and test your apps running on an Android device.</div></div><div class="bookmark-href"><img src="https://docs.microsoft.com/favicon.ico" class="icon bookmark-icon"/>https://docs.microsoft.com/en-us/xamarin/android/get-started/installation/set-up-device-for-development</div></div><img src="https://docs.microsoft.com/en-us/media/logos/logo-ms-social.png" class="bookmark-image"/></a></figure></div></div><figure id="ade645e1-9b9d-4962-b737-c91d4d8d01f3" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/IoT_Communications_and_Components_spec_-_App_Architecture-2.png"><img style="width:720px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/IoT_Communications_and_Components_spec_-_App_Architecture-2.png"/></a><figcaption>Xamarin Libraries leveraged to build the framework</figcaption></figure></div></div><div id="74b6b7c0-7b25-4a4d-9507-72c3d412fa83" class="column-list"><div id="a40a4f41-7f4d-4b6d-bc95-6f034ffa1873" style="width:25%" class="column"><h2 id="1dd772ac-54f1-4fa4-9d6a-cbdf84c12bcc" class="block-color-orange_background">Gateway Sync</h2></div><div id="8cc1a94f-b2bf-47ed-9d52-fa59a7b887d3" style="width:75%" class="column"><p id="41d68646-1f77-45b3-adfa-a031eddcc744" class="">The primary role of the AirLink gateway is to keep AirLink devices and the AirLink server in sync with respect to the state and operation of the device. There are three types of <strong>data sync</strong>:</p><ol type="1" id="4220947e-cf36-4d54-959e-faf9ee9f3329" class="numbered-list" start="1"><li>Server updates Device: Pay as you go credits after payment are the primary server update, along with client and configuration data<figure id="e6806817-065b-4fc7-b665-2d616cff8705" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/IoT_Communications_and_Components_spec_-_App_Architecture-2%201.png"><img style="width:1986px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/IoT_Communications_and_Components_spec_-_App_Architecture-2%201.png"/></a><figcaption>AirLink Gateways or this App maps Server and Device properties</figcaption></figure></li></ol><ol type="1" id="d585e72f-4278-4dfe-b645-0f9247d0f521" class="numbered-list" start="2"><li>Device posts time-series telemetry via primary gateway: Device posts various IoT data described in Nexus Resource Models relating to energy generation, consumption, battery use as well as productive output. In this case, the app actually masquerades as the device and posts data directly into the device&#x27;s telemetry endpoint. This is enabled for the app via user input of device access token or in a production app, from the server pairing the gateway with devices via sharing of the access token automatically upon sale. Location is added by the gateway.<p id="b5df5035-a363-4e2c-b775-d77d62f35130" class="">
</p></li></ol><ol type="1" id="d19aa28d-eb29-428b-b31f-f1d31056e075" class="numbered-list" start="3"><li>Neighborhood watch gateway posts device advertisement: If the app finds an AirLink device that is not registered as managed by that app, it will post it to the server as a &#x27;piggy-back&#x27; onto it&#x27;s own telemetry, which the server then snips out and decides to post to the original device or forward on to the lost devices database<div><figure id="12b3904e-f685-4a38-9187-180032d51195" class="image"><a href="AirLink_Unknown_Device_Flow.png"><img style="width:672px" src="AirLink_Unknown_Device_Flow.png"/></a><figcaption><strong>AirLink Lost/Stolen Devices Flow</strong></figcaption></figure></div></li></ol><p id="28ac5b52-b08f-4a79-9494-6218e48dff95" class="">
</p><p id="dea4f359-992b-476d-9d54-d99150444f83" class="">To convert between server-friendly JSON and Bluetooth-service friendly CBOR/.NET objects, the <a href="http://Json.NET">Json.NET</a> and <a href="https://github.com/peteroupc/CBOR">PeterO.CBOR</a> libraries are used. Since the list of properties can vary, we use collections and read the property types = device resource models such as ‚Äú/batt‚Äù and ‚Äú/temp‚Äù from the Bluetooth Descriptors.</p><figure id="590f1610-0394-4fc7-85df-277d05e3d053"><a href="https://www.newtonsoft.com/json/help/html/SerializingCollections.htm" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Serializing Collections</div><div class="bookmark-description">Product p1 = new Product { Name = &quot;Product 1&quot;, Price = 99.95m, ExpiryDate = new DateTime(2000, 12, 29, 0, 0, 0, DateTimeKind.Utc), }; Product p2 = new Product { Name = &quot;Product 2&quot;, Price = 12.50m, ExpiryDate = new DateTime(2009, 7, 31, 0, 0, 0, DateTimeKind.Utc), }; List products = new List (); products.Add(p1); products.Add(p2); string json = JsonConvert.SerializeObject(products, Formatting.Indented);</div></div><div class="bookmark-href"><img src="https://www.newtonsoft.com/json/help/icons/favicon.ico" class="icon bookmark-icon"/>https://www.newtonsoft.com/json/help/html/SerializingCollections.htm</div></div></a></figure></div></div><div id="aae151f9-ac25-4e29-b033-d3c1678d1aac" class="column-list"><div id="0cd444f5-4258-4d9a-a188-de9ed55e1983" style="width:25%" class="column"><h2 id="edff178c-15dc-4ed4-a2bc-81f12ed5429d" class="block-color-yellow_background">App UX Interactions</h2></div><div id="785d2a15-9b59-4364-9691-2033cfa86dc4" style="width:75%" class="column"><figure id="048c7809-f96f-4b0a-b936-6470b8881de4" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/IoT_Communications_and_Components_spec_-_App_Architecture.png"><img style="width:672px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/IoT_Communications_and_Components_spec_-_App_Architecture.png"/></a><figcaption>User - App - Device/Server Interactions</figcaption></figure></div></div><div id="ad19cf2d-ba5e-4c35-b2c6-8be488c497d4" class="column-list"><div id="adeb8849-bccf-4aab-a740-d6a006701e0a" style="width:37.5%" class="column"><h2 id="fb8d3642-e32c-4c06-b43c-ad216abe5629" class="block-color-yellow_background">App Components</h2><figure id="024dbc1a-9fec-4b17-afb3-ba20368da9b6"><a href="https://github.com/EnAccess/Airlink-App" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">GitHub - EnAccess/Airlink-App</div><div class="bookmark-description">Contribute to EnAccess/Airlink-App development by creating an account on GitHub.</div></div><div class="bookmark-href"><img src="https://github.com/favicon.ico" class="icon bookmark-icon"/>https://github.com/EnAccess/Airlink-App</div></div><img src="https://opengraph.githubassets.com/f055a8ceb9d490544e1f976560d77f26283f551ab2ad4e531b1dd56b2f004f22/EnAccess/Airlink-App" class="bookmark-image"/></a></figure></div><div id="30f23aa6-b09c-4671-942b-a959af569696" style="width:62.5%" class="column"><div id="810cd8d8-da84-461b-9236-bc53dca13a1c" class="collection-content"><h4 class="collection-title">Code Entry Points</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M0.637695 13.1914C1.0957 13.1914 1.32812 13 1.47852 12.5215L2.24414 10.3887H6.14746L6.90625 12.5215C7.05664 13 7.2959 13.1914 7.74707 13.1914C8.22559 13.1914 8.5332 12.9043 8.5332 12.4531C8.5332 12.2891 8.50586 12.1523 8.44434 11.9678L5.41602 3.79199C5.2041 3.21777 4.82129 2.9375 4.19922 2.9375C3.60449 2.9375 3.21484 3.21777 3.0166 3.78516L-0.0322266 12.002C-0.09375 12.1797 -0.121094 12.3232 -0.121094 12.4668C-0.121094 12.918 0.166016 13.1914 0.637695 13.1914ZM2.63379 9.12402L4.17871 4.68066H4.21973L5.76465 9.12402H2.63379ZM12.2793 13.2324C13.3115 13.2324 14.2891 12.6787 14.7129 11.8037H14.7402V12.5762C14.7471 12.9863 15.0273 13.2393 15.4238 13.2393C15.834 13.2393 16.1143 12.9795 16.1143 12.5215V8.00977C16.1143 6.49902 14.9658 5.52148 13.1543 5.52148C11.7666 5.52148 10.6592 6.08887 10.2695 6.99121C10.1943 7.15527 10.1533 7.3125 10.1533 7.46289C10.1533 7.81152 10.4062 8.04395 10.7686 8.04395C11.0215 8.04395 11.2129 7.94824 11.3496 7.73633C11.7529 6.99121 12.2861 6.65625 13.1064 6.65625C14.0977 6.65625 14.6992 7.20996 14.6992 8.1123V8.67285L12.5664 8.7959C10.7686 8.8916 9.77734 9.69824 9.77734 11.0107C9.77734 12.3369 10.8096 13.2324 12.2793 13.2324ZM12.6621 12.1387C11.8008 12.1387 11.2129 11.667 11.2129 10.9561C11.2129 10.2725 11.7598 9.82129 12.7578 9.75977L14.6992 9.62988V10.3203C14.6992 11.3457 13.7969 12.1387 12.6621 12.1387Z"></path></svg></span>Component</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>Category</th><th><span class="icon property-icon"><svg viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M1.56738 3.25879H14.4258C14.7676 3.25879 15.0479 2.97852 15.0479 2.63672C15.0479 2.29492 14.7744 2.02148 14.4258 2.02148H1.56738C1.21875 2.02148 0.952148 2.29492 0.952148 2.63672C0.952148 2.97852 1.22559 3.25879 1.56738 3.25879ZM1.56738 6.84082H14.4258C14.7676 6.84082 15.0479 6.56055 15.0479 6.21875C15.0479 5.87695 14.7744 5.60352 14.4258 5.60352H1.56738C1.21875 5.60352 0.952148 5.87695 0.952148 6.21875C0.952148 6.56055 1.22559 6.84082 1.56738 6.84082ZM1.56738 10.4229H14.4258C14.7676 10.4229 15.0479 10.1426 15.0479 9.80078C15.0479 9.45898 14.7744 9.18555 14.4258 9.18555H1.56738C1.21875 9.18555 0.952148 9.45898 0.952148 9.80078C0.952148 10.1426 1.22559 10.4229 1.56738 10.4229ZM1.56738 14.0049H8.75879C9.10059 14.0049 9.38086 13.7246 9.38086 13.3828C9.38086 13.041 9.10742 12.7676 8.75879 12.7676H1.56738C1.21875 12.7676 0.952148 13.041 0.952148 13.3828C0.952148 13.7246 1.22559 14.0049 1.56738 14.0049Z"></path></svg></span>Function</th></tr></thead><tbody><tr id="a938d0cb-100c-4683-9ce2-79fc2cbb91d3"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/BleDevice%20cs%20a938d0cb100c46839ce279fc2cbb91d3.html">BleDevice.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-orange">AirLink Device Model</span><span class="selected-value select-value-color-default">Platform Independent</span></td><td class="cell-uY_}">Describes typical AirLink Device and properties</td></tr><tr id="0d23e0ff-7bc9-477f-810e-139f9ebb47e8"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/AirLinkDevice%20cs%200d23e0ff7bc9477f810e139f9ebb47e8.html">AirLinkDevice.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-default">Platform Independent</span></td><td class="cell-uY_}">Describes server-side interpretation of AirLink resource models</td></tr><tr id="39761621-ae62-4983-bbe9-017713e921df"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/BleServer%20cs%2039761621ae624983bbe9017713e921df.html">BleServer.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-pink">Android</span></td><td class="cell-uY_}">The gateway device always acts as a server, and does not advertise an AirLink Advertisement packet. This server </td></tr><tr id="871f71c5-b224-4b54-89d7-23895340c099"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/MainActivity%20cs%20871f71c5b2244b5489d723895340c099.html">MainActivity.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-pink">Android</span><span class="selected-value select-value-color-purple">App Business Logic</span></td><td class="cell-uY_}">Start background services</td></tr><tr id="8d7199a1-f236-4fef-9fbb-5778e87a935d"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/BackgroundService%20cs%208d7199a1f2364fef9fbb5778e87a935d.html">BackgroundService.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-pink">Android</span><span class="selected-value select-value-color-gray">Service</span></td><td class="cell-uY_}">BLE Advt monitoring registered, even if app exits or phone reboots</td></tr><tr id="abd5d9e2-35e2-4f33-b527-270fb41604d8"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/HttpsEndpoint%20cs%20abd5d9e235e24f33b527270fb41604d8.html">HttpsEndpoint.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-default">Platform Independent</span></td><td class="cell-uY_}">Selects appropriate AirLink server endpoint based on type of transmission</td></tr><tr id="63b452de-37a5-4592-82de-9ada665ab929"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/IDataStore%20cs%2063b452de37a5459282de9ada665ab929.html">IDataStore.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-default">Platform Independent</span></td><td class="cell-uY_}">Implements the database to store devices found</td></tr><tr id="1a95eb19-d13c-4e72-8874-4ef2ade59967"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/PostData%20cs%201a95eb19d13c4e7288744ef2ade59967.html">PostData.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-default">Platform Independent</span></td><td class="cell-uY_}">Sends Data to AirLink server and processes errors</td></tr><tr id="c161a371-2fdf-449c-b45d-a4a0f8230f66"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/ProfilePageViewModel%20cs%20c161a3712fdf449cb45da4a0f8230f66.html">ProfilePageViewModel.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-default">Platform Independent</span><span class="selected-value select-value-color-yellow">UI Business Logic</span></td><td class="cell-uY_}">Handles all the entries that configure the App to connect to the AirLink server</td></tr><tr id="d92249a9-82f1-4ecd-9f5c-67351b3c3bcc"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/BLEDeviceDetailsViewModel%20cs%20d92249a982f14ecd9f5c67351b3c3bcc.html">BLEDeviceDetailsViewModel.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-default">Platform Independent</span><span class="selected-value select-value-color-yellow">UI Business Logic</span></td><td class="cell-uY_}">Handles a single selected BLE device, sync properties, provision etc</td></tr><tr id="9d7be5a6-e793-4032-bd8d-6cfa6f3e206b"><td class="cell-title"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/Code%20Entry%20Points%20810cd8d8da84461b9236bc53dca13a1c/BLEDevicesViewModel%20cs%209d7be5a6e7934032bd8d6cfa6f3e206b.html">BLEDevicesViewModel.cs</a></td><td class="cell-gwbY"><span class="selected-value select-value-color-default">Platform Independent</span><span class="selected-value select-value-color-yellow">UI Business Logic</span></td><td class="cell-uY_}">Handles BLE devices scan page</td></tr></tbody></table></div></div></div><div id="fbaf4ec0-1bc9-4a83-8952-896891928a0f" class="column-list"><div id="ec39105b-c5d8-4396-a737-20825074022b" style="width:18.75%" class="column"><h2 id="ac6d27e9-fd46-4792-8595-444c9669bcb7" class="block-color-teal_background">App Screenshots </h2></div><div id="04ef9008-0f5b-4d6e-9d0e-a7b103c36b70" style="width:81.25%" class="column"><h3 id="da0a61e1-4602-4012-b492-a9d59addebe6" class="block-color-gray_background">Configuring to connect to server</h3><div id="48750c9f-b4d5-47ae-8c0c-1ae80564ab70" class="column-list"><div id="31b184b8-1e40-4b97-943e-b9110bb94105" style="width:50%" class="column"><p id="0a9d154e-6530-4b6a-ae20-155c65a4159b" class="">First Step: Enter the information from AirLink Server and Provision the phone as a gateway on the server.</p><figure id="f7813a77-8e2d-4673-9aa4-2599df144f84" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/3._Profile_view.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/3._Profile_view.jpg"/></a></figure></div><div id="a8d48a17-1089-4c61-bc0d-faf96b505d98" style="width:50%" class="column"><p id="f2e0fb36-f994-455b-a2bc-2d0ccd5c5a9f" class="">If you enter the data correctly including the tenant administrator, the gateway will provision.</p><figure id="b1f740fb-917a-48b7-9f9e-86548f973387" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/3.1_PROVISION_GATEWAY_-_Gateway_provisioned_successfully.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/3.1_PROVISION_GATEWAY_-_Gateway_provisioned_successfully.jpg"/></a></figure></div></div><h3 id="b1258658-fe5e-4fcf-8877-88ddf8f2e0eb" class="block-color-gray_background">Connecting to AirLink devices</h3><div id="6421ceac-d93e-442d-9547-1fdc218a7c7b" class="column-list"><div id="b80cbff0-63e4-44c0-aa33-97ab9449e2e8" style="width:50%" class="column"><p id="098a1f79-1b67-4838-87e7-65ed73de5ad9" class="">Second Step: Your phone is ready to sync devices. Discover AirLink devices in the vicinity!  </p><figure id="c08a4629-9fed-49bc-8217-9ed784959c7f" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/1._Devices_view.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/1._Devices_view.jpg"/></a></figure></div><div id="e33d7b8b-0101-45fb-880d-f81e4ddb1548" style="width:50%" class="column"><p id="c8cfdd7b-c3be-4ec7-8db1-e1e29288abee" class="">Once you find a device, tapping on it simply brings up a list of Nexus resources available on the device</p><figure id="1dff3eed-f002-43b4-a2a9-b1aca937ca49" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2._Resources_view.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2._Resources_view.jpg"/></a></figure></div></div><h3 id="f631490e-cc73-4b13-9b3e-ca3b0e55bc90" class="block-color-gray_background">Authorizing the gateway to the device with the Access Token</h3><div id="8878d7e4-1d78-4d51-ba79-7cb4aa9d65fe" class="column-list"><div id="630bec3c-f692-4ef4-999d-e154ce419938" style="width:33.333333333333336%" class="column"><p id="e99ca2ce-2add-4587-a65d-1dbb44c76b7e" class="">Always, when connecting to a device, we recommend that the device lock it‚Äôs properties until the  (default or server) access token is supplied. Authorizing the device supplies it with the default access token.</p><figure id="00f76446-6b18-4bd0-b704-0bfdbcfd0c3b" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.1_READ_RESOURCE_-_Data_is_empty.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.1_READ_RESOURCE_-_Data_is_empty.jpg"/></a></figure></div><div id="1567d345-fbbf-4d56-9335-64f94862ed26" style="width:33.333333333333336%" class="column"><p id="8e7f787a-61a4-4ec3-b019-1be5523ffcc0" class="">To authorize the device, simply tap the ‚ÄúAuthorize‚Äù button. The default access token is already saved on both the App and the device. The device will then compare its access token with this default one. Once they match, the device will be successfully authorized. </p><figure id="fb3512df-e9d3-4ed6-b916-4a1abf2f6420" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.2_AUTHORIZE_-_Device_authorized.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.2_AUTHORIZE_-_Device_authorized.jpg"/></a></figure></div><div id="b36af56a-2958-494c-aa3b-b46af099ccee" style="width:33.33333333333333%" class="column"><p id="cff3c3ee-a554-441b-948e-da5e5f28c590" class="">Once authorized, you can now read data from the device. The App receives CBOR encoded data from the device, and decodes it into a JSON that is more amenable to posting to the server, and displays this for each property when tapped.</p><figure id="34161a27-9e18-4ce9-9205-d327d9e143c2" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.3_READ_RESOURCE_-_Data_is_displayed.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.3_READ_RESOURCE_-_Data_is_displayed.jpg"/></a></figure></div></div><h3 id="1bb700f8-d62b-4004-8ad9-595f1afeb455" class="block-color-gray_background">Serializing and provisioning a new device and preparing it for accepting tokens</h3><div id="6e307ca0-c2b2-4d56-83ea-20a7d087d0de" class="column-list"><div id="19d40b25-826d-41da-b547-8eb254a24b0b" style="width:33.333333333333336%" class="column"><p id="0cdc7b43-19d1-44cd-952c-89569910d7ce" class="">If a device has just been manufactured, it may not yet be serialized, and be locked with a default access token. Enter this token, then press ‚ÄúProvision‚Äù to provision the device. The app will prompt for serial number entry.</p><figure id="b0548221-7c7f-4dcb-b051-a0f9318ac5c1" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.4_PROVISION_-_Choice_for_serialization.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.4_PROVISION_-_Choice_for_serialization.jpg"/></a></figure></div><div id="6424ad40-1f01-4ff8-a33b-d2f15c674dba" style="width:33.333333333333336%" class="column"><p id="69800211-8f24-4241-be83-e0c39a372057" class="">Scan or enter by hand this serial number. This is a one-time activity after which the device will forever remember it‚Äôs serial number. However if the serial number exists on the server, the provisioning will fail.</p><figure id="f6fc2fab-bd32-4256-979d-c5c86b4fed47" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.5_TYPE_SERIAL_NUMBER.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.5_TYPE_SERIAL_NUMBER.jpg"/></a></figure></div><div id="7a824e1c-5f44-4389-aaac-dd59ddd230b8" style="width:33.33333333333333%" class="column"><p id="5e7be28e-5fa9-43a6-bb10-285db243906c" class="">As long as a unique serial number is supplied, the server accepts the device and returns a device-specific access token, which the app saves automatically to secure storage as well as displays in the access token field</p><figure id="43a6d386-0fb6-4068-9a15-b6c967b712dd" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.6_Device_provisioned_successfully.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.6_Device_provisioned_successfully.jpg"/></a></figure></div></div><h3 id="69738243-51b0-41f7-878c-80bfe17902bf" class="block-color-gray_background">Entering Tokens</h3><div id="78ce71d4-f217-4b4a-9510-e4372ae37c49" class="column-list"><div id="4b43395e-6ab3-404a-9a86-0daa9efeef93" style="width:50%" class="column"><p id="8913696e-a959-4049-ab1a-5fd669b8fa53" class="">Some properties are writeable, especially true for the PAYG token property, found in the ‚ÄúPC‚Äù resource. Tapping this will open a prompt to enter a token. During the Provisioning stage, the token generator on the server is initialized and matched to each device‚Äôs secret. Hence, the token can be obtained from the server automatically by syncing the phone, or by manually copying the PC_tkn property value and inputting by hand while the phone is offline.</p><figure id="e33da2d8-33de-4900-9b75-524984bcf302" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.7_ENTER_PAYG_TOKEN.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.7_ENTER_PAYG_TOKEN.jpg"/></a></figure></div><div id="dbd15d27-6087-44fb-b09d-8a7436d21933" style="width:50%" class="column"><p id="fdc84863-82d9-4d18-892d-6edf45f2b795" class="">PAYG tokens are single-use and must match the individual device. If these criteria are met, the device accepts the token.</p><figure id="4211657e-7c96-4d52-a090-3fb05cc28461" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.8_SUCCESS_-_Success_on_Token_entry.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.8_SUCCESS_-_Success_on_Token_entry.jpg"/></a></figure></div></div><h3 id="379d027d-52bb-47e6-9df1-1b136cc61919" class="block-color-gray_background">Synchronizing data with the server over the lifetime of the device</h3><div id="9640d5e4-7f6d-4cca-aa80-052563363836" class="column-list"><div id="987ae208-2b8a-4230-84a1-704d36745c7e" style="width:50%" class="column"><p id="451c9298-2f60-4039-8aa1-13df5f132dcf" class="">All AirLink properties can be kept in sync between the server and the individual device simply by tapping the Sync button, or using the underlying function in an automated flow in your custom version of the app</p><figure id="6ecdb84b-1d95-4c54-92c4-4b2f74db765e" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.9_SYNC_-_Syncing_data.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.9_SYNC_-_Syncing_data.jpg"/></a></figure></div><div id="286869da-391f-4912-b2a3-bdddaad13534" style="width:50%" class="column"><p id="259badd6-1faa-4f42-a3aa-6303a0b9283f" class="">The ability of the gateway to post device data to the server (‚ÄùClient Scope‚Äù) as well as pull server data into the device (‚ÄùShared Scope‚Äù) generates a success message. All failure messages can be effectively debugged using the USB-connected debug mode of Visual Studio.</p><figure id="5979b263-21ab-4506-ac1d-19be7d5946d1" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.10_SUCCESS_-_Success_on_syncing_data.jpg"><img style="width:288px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/2.10_SUCCESS_-_Success_on_syncing_data.jpg"/></a></figure></div></div></div></div><hr id="621c815c-375f-4386-a20a-484399a01a40"/><div id="73950471-dd2d-442f-ba77-a65e17b222a4" class="column-list"><div id="48f949d9-fb74-475e-8b2e-697c8fa3ef41" style="width:6.25%" class="column"><figure id="8ca92734-9946-43df-b2a4-f4cc0caa6a38" class="image"><a href="AirLink%20App%20ab448f056ad94eb097874d756342f361/syo9FlQN.jpg"><img style="width:72px" src="AirLink%20App%20ab448f056ad94eb097874d756342f361/syo9FlQN.jpg"/></a></figure></div><div id="99dd0496-a711-48d5-bc0e-c99783536b3d" style="width:93.75%" class="column"><p id="b8c98fe4-bda8-4d06-b8db-861e13207809" class="">Copyright 2021 Simusolar Inc </p></div></div><p id="b7d64087-fbd7-4e11-90a4-ba60c380f896" class="">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p><p id="1fd41524-339a-46a7-956b-b3489ee03b54" class="">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p><p id="66072f10-dfed-4724-9783-8932f664c544" class="">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></div></article></body></html>